<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>임시 주문 내역 확인</title>
    <link rel="stylesheet" href="/css/tempOrder.css">
</head>
<body>

<h2>임시 주문 내역</h2>
<p>주문자: <span id="username">-</span></p>
<p>전화번호: <span id="phoneNumber">-</span></p>

<div id="orderContainer">
    <!-- 상품 카드 렌더링 -->
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const container = document.getElementById("orderContainer");
        const username = document.getElementById("username");
        const phone = document.getElementById("phoneNumber");

        const tempOrderStr = sessionStorage.getItem("orderDto");
        if (!tempOrderStr) {
            alert("임시 주문 데이터가 없습니다. 장바구니로 이동합니다.");
            window.location.href = "/cart.html";
            return;
        }

        const tempOrder = JSON.parse(tempOrderStr);

        username.textContent = tempOrder.ordererName || "-";
        phone.textContent = tempOrder.phoneNumber || "-";

        const names = tempOrder.productNames || [];
        const sizes = tempOrder.productSizes || [];
        const images = tempOrder.productImages || [];
        const quantities = tempOrder.productQuantities || [];
        const length = Math.max(names.length, sizes.length, images.length, quantities.length, 0);

        if (length === 0) {
            container.innerHTML = "<p>선택된 상품이 없습니다.</p>";
            return;
        }

        let html = "";
        for (let i = 0; i < length; i++) {
            html += `
            <div class="card">
                <img src="${images[i] || '/images/default-product.png'}" alt="${names[i] || '상품'}">
                <p>상품명: ${names[i] || '-'}</p>
                <p>사이즈: ${sizes[i] || '-'}</p>
                <p>수량: ${quantities[i] || 0}</p>
            </div>`;
        }

        container.innerHTML = html;
    });
</script>

</body>
</html>
