<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>임시 주문 내역 확인</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body class="bg-light">
<div class="container mt-5">
  <h2 class="mb-4">임시 주문 내역 확인</h2>

    <!-- ================== 적용 포인트 ==================
    1. sessionStorage에서 orderDto 불러오기
    2. 선택한 장바구니 상품 목록과 총액 표시
    3. 결제/배송 정보 입력 후 order.html로 전달
    ==================================================== -->
  <div id="orderSummary" class="mb-4"></div>
  <button id="proceedToPayment" class="btn btn-success">결제 진행</button>
</div>

<script>
    const orderDtoStr = sessionStorage.getItem("orderDto");

    if (!orderDtoStr) {
      alert("주문 정보가 없습니다.");
      window.location.href = "/cart";
    } else {
      const orderDto = JSON.parse(orderDtoStr);

      // 상품 목록 + 가격 확인
      const summaryDiv = document.getElementById("orderSummary");
      summaryDiv.innerHTML = `
        <ul class="list-group">
            <li class="list-group-item"><strong>주문자명:</strong> ${orderDto.ordererName || "-"}</li>
            <li class="list-group-item"><strong>전화번호:</strong> ${orderDto.phoneNumber || "-"}</li>
            <li class="list-group-item"><strong>주소:</strong> (${orderDto.postCode || "-"}) ${orderDto.address || ""} ${orderDto.detailAddress || ""}</li>
            <li class="list-group-item"><strong>결제 수단:</strong> ${orderDto.payMethod || "-"}</li>
            <li class="list-group-item"><strong>장바구니 ID:</strong> ${orderDto.cartIds.join(", ")}</li>
            <li class="list-group-item"><strong>총 결제 금액:</strong> ${Number(orderDto.totalPrice).toLocaleString()}원</li>
        </ul>
      `;

      // 결제 진행 → order.html 이동
      document.getElementById("proceedToPayment").addEventListener("click", function () {
        sessionStorage.setItem("orderDto", JSON.stringify(orderDto)); // 최신 orderDto 저장
        window.location.href = "/order"; // 최종 주문서 페이지
      });
    }
</script>
</body>
</html>
