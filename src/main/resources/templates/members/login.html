<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>로그인</title>
    <link rel="stylesheet" href="/css/login.css" />
</head>
<body>
<div class="login-container">
    <div class="modal-overlay show" id="modalOverlay"></div>

    <div class="login-modal show" id="loginModal">
        <div class="modal-header">
            <span class="back-button" title="뒤로 가기">&#8592;</span>
        </div>

        <div class="modal-body">
            <form id="loginForm">
                <label><input type="email" id="email" placeholder="이메일 주소" required /></label>
                <label><input type="password" id="password" placeholder="비밀번호" required /></label>
                <button type="submit" class="submit-btn">로그인</button>
            </form>

            <div class="find-links">
                <a href="#">이메일 가입</a>
                <span>|</span>
                <a href="#">이메일 찾기</a>
                <span>|</span>
                <a href="#">비밀번호 찾기</a>
            </div>

            <div class="social-login">
                <button id="kakaoLoginBtn" type="button" aria-label="카카오 로그인">
                    <img src="/logo/icons/kakao_login_button.png" alt="카카오 로그인" />
                </button>
                <button id="naverLoginBtn" type="button" aria-label="네이버 로그인">
                    <img src="/logo/icons/naver_login_button.png" alt="네이버 로그인" />
                </button>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const loginModal = document.getElementById("loginModal");
  const backButton = document.querySelector(".back-button");
  const modalOverlay = document.getElementById("modalOverlay");
  const loginForm = document.getElementById("loginForm");

  // 뒤로가기 버튼 클릭 시 홈으로 이동
  backButton.addEventListener("click", () => {
    window.location.href = "/";
  });

  // 로그인 폼 제출 이벤트 처리
  loginForm.addEventListener("submit", async (e) => {
    e.preventDefault();

    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();

    try {
      const response = await fetch('/api/login', {  // 실제 로그인 API 경로로 변경하세요
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, password })
      });

      if (response.ok) {
        // 로그인 성공 시 홈으로 이동
        window.location.href = "/";
      } else {
        const errorText = await response.text();
        alert("로그인 실패: " + errorText);
      }
    } catch (error) {
      alert("서버와 통신 중 오류가 발생했습니다.");
      console.error(error);
    }
  });

  // 소셜 로그인 URL (실제 값으로 변경 필요)
  const kakaoLoginUrl = "https://kauth.kakao.com/oauth/authorize?client_id=YOUR_KAKAO_CLIENT_ID&redirect_uri=YOUR_REDIRECT_URI&response_type=code";
  const naverLoginUrl = "https://nid.naver.com/oauth2.0/authorize?client_id=YOUR_NAVER_CLIENT_ID&redirect_uri=YOUR_REDIRECT_URI&response_type=code&state=STATE_STRING";

  // 카카오 로그인 버튼 클릭 시 리디렉션
  document.getElementById("kakaoLoginBtn").addEventListener("click", () => {
    window.location.href = kakaoLoginUrl;
  });

  // 네이버 로그인 버튼 클릭 시 리디렉션
  document.getElementById("naverLoginBtn").addEventListener("click", () => {
    window.location.href = naverLoginUrl;
  });
});
</script>
</body>
</html>
