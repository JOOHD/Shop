<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>로그인</title>
    <link rel="stylesheet" th:href="@{/css/login.css}" />
</head>
<body>
<div class="login-container">
    <div class="modal-overlay show" id="modalOverlay"></div>

    <div class="login-modal show" id="loginModal">
        <div class="modal-header">
            <span class="back-button" title="뒤로 가기">&#8592;</span>
        </div>

        <div class="modal-body">
            <form id="formLogin" method="post" th:action="@{/formLogin}">
                <label><input type="email" id="username" name="username" placeholder="이메일 주소" required /></label>
                <label><input type="password" id="password" name="password" placeholder="비밀번호" required /></label>
                <!-- CSRF 토큰 -->
                <input type="hidden" name="_csrf" th:value="${_csrf.token}" />
                <button type="submit" class="submit-btn">로그인</button>
            </form>

            <div class="find-links">
                <a href="#">이메일 가입</a>
                <span>|</span>
                <a href="#">이메일 찾기</a>
                <span>|</span>
                <a href="#">비밀번호 찾기</a>
            </div>

            <div class="social-login">
                <button id="kakaoLoginBtn" type="button" aria-label="카카오 로그인">
                    <img th:src="@{/logo/icons/kakao_login_button.png}" alt="카카오 로그인" />
                </button>
                <button id="naverLoginBtn" type="button" aria-label="네이버 로그인">
                    <img th:src="@{/logo/icons/naver_login_button.png}" alt="네이버 로그인" />
                </button>
            </div>
        </div>
    </div>
</div>
</body>
</html>

<script>
function getCookie(name) {
    const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
    return match ? decodeURIComponent(match[2]) : null;
}

document.addEventListener("DOMContentLoaded", () => {
    const backButton = document.querySelector(".back-button");
    backButton.addEventListener("click", () => {
        window.location.href = "/";
    });

    // 소셜 로그인 버튼 링크
    document.querySelector("#kakaoLoginBtn").addEventListener("click", () => {
        window.location.href = "http://localhost:8080/oauth2/authorization/kakao";
    });
    document.querySelector("#naverLoginBtn").addEventListener("click", () => {
        window.location.href = "http://localhost:8080/oauth2/authorization/naver";
    });
});
</script>
</body>
</html>
