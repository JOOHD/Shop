<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>상품 목록</title>
    <link rel="stylesheet" href="/css/fragments/header.css">
    <link rel="stylesheet" href="/css/product.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<!-- 헤더 -->
<div th:replace="fragments/header :: header"></div>
<div class="overlay" onclick="toggleSidebar()"></div>

<!-- 카테고리 필터 -->
<div class="category-nav">
    <div class="category active">전체</div>
    <div class="category">상의</div>
    <div class="category">하의</div>
    <div class="category">아우터</div>
    <div class="category">용품</div>
</div>

<div class="filter-bar">
    <select>
        <option>인기순</option>
        <option>최신순</option>
        <option>낮은 가격순</option>
        <option>높은 가격순</option>
    </select>
    <button class="btn-filter"><i class="fas fa-sliders-h"></i> 필터</button>
</div>

<!-- 상품 리스트 -->
<div class="product-list">
    <div class="product-item" th:each="product : ${products}">
        <div class="thumbnail">
            <!-- 썸네일 이미지 -->
            <img th:src="@{${product.productThumbnails[0].imagePath}}" alt="상품 이미지">

            <!-- 할인 태그 (있을 경우만) -->
            <div class="tag" th:if="${product.isDiscount}">할인</div>
        </div>

        <div class="info">
            <p class="price" th:if="${product.isDiscount}">
                <span class="original-price" th:text="'₩' + ${product.price}">₩0</span>
                <span class="discounted-price" th:text="'₩' + ${product.price * (1 - product.discountRate / 100.0)}">₩0</span>
            </p>
            <p class="price" th:unless="${product.isDiscount}" th:text="'₩' + ${product.price}">₩0</p>

            <p class="name" th:text="${product.productName}">상품명</p>
        </div>
    </div>
</div>

<script>
    function toggleSidebar() {
        document.querySelector('.sidebar')?.classList.toggle('active');
        document.querySelector('.overlay')?.classList.toggle('active');
    }
</script>

</body>
</html>
