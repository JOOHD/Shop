<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
  <meta charset="UTF-8" />
  <title th:text="${product.productName}">상품 상세</title>
  <link rel="stylesheet" href="/css/fragments/header.css" />
  <link rel="stylesheet" href="/css/productDetail.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>

<!-- 헤더 -->
<div th:replace="fragments/header :: header"></div>

<!-- 상품 상세 컨테이너 -->
<main class="product-detail-container">

  <!-- 왼쪽: 대표 이미지 (첫번째 썸네일) -->
  <section class="image-section">
    <img
            th:with="cleanPath=${product.productThumbnails[0].imagePath.startsWith('/') ? product.productThumbnails[0].imagePath.substring(1) : product.productThumbnails[0].imagePath}"
            th:src="@{/{path}(path=${cleanPath})}"
            alt="대표 이미지"
            class="main-image" />
  </section>

  <!-- 오른쪽: 상품 정보 -->
  <section class="info-section">
    <h1 class="product-name" th:text="${product.productName}">상품명</h1>

    <div class="price-info">
      <span class="original-price" th:if="${product.isDiscount}" th:text="'₩' + ${#numbers.formatInteger(product.price, 0, 'COMMA')}"></span>
      <span class="discount-rate" th:if="${product.isDiscount}" th:text="${product.discountRate + '% 할인'}"></span>
      <span class="discounted-price" th:text="'₩' + ${#numbers.formatInteger(product.isDiscount ? product.price * (1 - product.discountRate / 100.0) : product.price, 0, 'COMMA')}"></span>
    </div>

    <!-- 사이즈 선택 -->
    <div class="size-selection">
      <label>사이즈</label>
      <div class="size-options">
        <button>S</button>
        <button>M</button>
        <button>L</button>
        <button>XL</button>
        <button>2XL</button>
      </div>
    </div>

    <!-- 액션 버튼 -->
    <div class="action-buttons">
      <a href="/cart" class="add-cart-btn">장바구니에 담기</a>
    </div>
  </section>

</main>
<script>
    document.querySelector(".add-cart-btn").addEventListener("click", function () {
        // 예: 장바구니에 상품 담는 처리 후 페이지 이동
        window.location.href = "/cart";
    });
</script>
</body>
</html>
