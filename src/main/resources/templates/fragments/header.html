<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <title>Header</title>
    <link rel="stylesheet" href="/css/fragments/header.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<header class="header-bar" th:fragment="header">

    <!-- 좌측 아이콘 -->
    <div class="left-icons">
        <i class="fas fa-bars" title="메뉴" onclick="toggleSidebar()"></i>
        <i class="fas fa-search" title="검색" onclick="toggleSearchSidebar()"></i>
    </div>

    <!-- 중앙 로고 -->
    <div class="header-center">
        <a href="/" class="header-logo-link">
            <img class="logo" src="/logo/icons/mufc_icon.png" alt="MUFC 로고"/>
        </a>
    </div>

    <!-- 우측 아이콘 -->
    <div class="right-icons">

        <!-- 비로그인 -->
        <div sec:authorize="isAnonymous()">
            <a href="/login" title="로그인"><i class="fas fa-user"></i></a>
        </div>

        <!-- 로그인 (USER) -->
        <div class="user-icons" sec:authorize="hasRole('USER')">
            <a href="/profile" title="내 정보"><i class="fas fa-user-circle"></i><span>내 정보</span></a>
            <a href="/orders" title="주문 내역"><i class="fas fa-box"></i><span>주문 내역</span></a>
            <a href="/wishlist" title="위시리스트"><i class="fas fa-heart"></i><span>위시리스트</span></a>
            <a href="/cart" title="장바구니"><i class="fas fa-shopping-cart"></i><span>장바구니</span></a>
            <a href="/logout" title="로그아웃"><i class="fas fa-sign-out-alt"></i><span>로그아웃</span></a>
        </div>

        <!-- 로그인 (ADMIN) -->
        <div class="admin-icons" sec:authorize="hasRole('ADMIN')">
            <div class="admin-dropdown">
                <a href="/admin/products/list" title="상품 관리" class="admin-dropdown-toggle">
                    <i class="fas fa-cubes"></i>
                </a>
                <div class="admin-dropdown-menu">
                    <a href="/admin/products/list">상품 목록</a>
                    <a href="/admin/products/register">상품 등록</a>
                </div>
            </div>
            <a href="/admin/orders/list" title="주문 관리"><i class="fas fa-truck"></i></a>
            <a href="/admin/members/list" title="회원 관리"><i class="fas fa-users"></i></a>
            <a href="/logout" title="로그아웃"><i class="fas fa-sign-out-alt"></i></a>
        </div>

    </div>
</header>

<!-- 공통 스크립트 -->
<script>
    // 사이드바 토글
    function toggleSidebar() {
      const sidebar = document.querySelector(".sidebar");
      const overlay = document.querySelector(".overlay");
      if (sidebar && overlay) {
        sidebar.classList.toggle("active");
        overlay.classList.toggle("active");
      } else {
        console.log("sidebar 또는 overlay 요소가 없습니다.");
      }
    }

    // 검색창 토글
    function toggleSearchSidebar() {
      const search = document.querySelector(".search-sidebar");
      if (search) {
        search.classList.toggle("active");
      } else {
        console.log("검색 사이드바 요소가 없습니다.");
      }
    }

</script>

</body>
</html>
